–°–∫–ª–æ–Ω–∏—Ä—É–π —Å–µ–±–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://disk.360.yandex.ru/d/bmvA2CqkGRR_yA


set -euo pipefail

# 1) –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
SHARE_URL="https://disk.360.yandex.ru/d/bmvA2CqkGRR_yA


"
OUT_DIR="/project/workspace/import_yadisk"
API_URL="https://cloud-api.yandex.net/v1/disk/public/resources/download"

# 2) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
mkdir -p "$OUT_DIR"
cd "$OUT_DIR"

# 3) –ü–æ–ª—É—á–∏—Ç—å –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É (href) —á–µ—Ä–µ–∑ API
JSON=$(curl -sG --data-urlencode "public_key=$SHARE_URL" "$API_URL")
HREF=$(printf "%s" "$JSON" | sed -n 's/.*"href":"\([^"]*\)".*/\1/p')
[ -n "$HREF" ] || { echo "Failed to resolve direct download URL"; exit 2; }
DL_URL=$(printf "%s" "$HREF" | sed 's#\\/#/#g')

# 4) –°–∫–∞—á–∞—Ç—å ZIP (–¥–∞—Å—Ç ¬´—Å—Ç—Ä–∞–Ω–Ω–æ–µ¬ª –∏–º—è –∏–∑ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤)
curl -fL -OJ "$DL_URL"

# 5) –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–º—è
F=$(ls -1t | head -n1)
mv -f "$F" download.zip

# 6) –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å (bsdtar –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –∏ UTF‚Äë8 –∏–º–µ–Ω–∞–º–∏)
rm -rf extracted && mkdir extracted
if command -v bsdtar >/dev/null 2>&1; then
  LANG=C.UTF-8 bsdtar -xf download.zip -C extracted
else
  unzip -q -o download.zip -d extracted || { echo "Install bsdtar (libarchive)"; exit 3; }
fi

# 7) –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls -la extracted | head -n 50
echo "–ì–æ—Ç–æ–≤–æ. –ü—É—Ç—å: $OUT_DIR/extracted"





+++

üöÄ –î–ï–ü–õ–û–ô –ù–ê TRYCLOUDFLARE.COM - –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø

üìã –ß–¢–û –ù–£–ñ–ù–û:





Supabase Database Password: NeuroMag_1_1



Brave API Keys (—É–∂–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ)



OpenRouter API Key (—É–∂–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ)



Linux/Mac —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Node.js 18+ –∏–ª–∏ Bun



üéØ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (–ö–û–ü–ò–ü–ê–°–¢–ê)

# –®–ê–ì 1: –ü–µ—Ä–µ–π–¥–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd PRMachine-4

# –®–ê–ì 2: –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
# –∏–ª–∏ –µ—Å–ª–∏ –µ—Å—Ç—å bun:
# bun install

# –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ .env —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
cat .env

# –ï—Å–ª–∏ .env –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π –µ–≥–æ:
cat > .env << 'EOF'
# Supabase Configuration
SUPABASE_URL=https://nldzwfopogknvjjhtuns.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZHp3Zm9wb2drbnZqamh0dW5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NjA2MTksImV4cCI6MjA3NzUzNjYxOX0.Mb1CnnUMFTGFIhYM9UcIdFa6yCG2THp9l2nQQTnnvtw

# Database Connection String - POOLER (—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ IPv4)
DATABASE_URL=postgresql://postgres:NeuroMag_1_1@aws-0-eu-central-1.pooler.supabase.com:6543/postgres

# Brave Search API
BRAVE_API_KEY_1=BSAiH1vhLfsKM_unpLEPqIulBOwnDgt
BRAVE_API_KEY_2=BSA-qCbl-osY1wjC2lW4PsIjx0Qt1IN
BRAVE_API_KEY_3=BSArBFB2NMjeC8WUZ_Mlif9CwSyjw_2
BRAVE_API_KEY_4=BSArBFB2NMjeC8WUZ_Mlif9CwSyjw_2

# OpenRouter API
OPENROUTER_API_KEY=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

# Session
SESSION_SECRET=auto-generated-secret-change-in-production
EOF

# –®–ê–ì 4: –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü)
npm run db:push
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–ø—É—Å—Ç–∏, —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

# –®–ê–ì 5: –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä (–≤ —Ñ–æ–Ω–µ)
chmod +x start-with-env.sh
./start-with-env.sh &

# –ü–æ–¥–æ–∂–¥–∏ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://localhost:5000/

# –®–ê–ì 6: –°–∫–∞—á–∞–π cloudflared
wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -O cloudflared
chmod +x cloudflared

# –®–ê–ì 7: –ó–∞–ø—É—Å—Ç–∏ —Ç—É–Ω–Ω–µ–ª—å
./cloudflared tunnel --url http://localhost:5000


–ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –≤ —à–∞–≥–µ 7 —É–≤–∏–¥–∏—à—å:

+--------------------------------------------------------------------------------------------+
|  Your quick Tunnel has been created! Visit it at (it may take some time to be reachable):  |
|  https://–¢–í–û–Ø-–°–õ–£–ß–ê–ô–ù–ê–Ø-–°–°–´–õ–ö–ê.trycloudflare.com                                           |
+--------------------------------------------------------------------------------------------+


–≠–¢–û –¢–í–û–Ø –ü–£–ë–õ–ò–ß–ù–ê–Ø –°–°–´–õ–ö–ê! –û–¢–ö–†–´–í–ê–ô –í –ë–†–ê–£–ó–ï–†–ï!



üîß –®–ê–ì –ó–ê –®–ê–ì–û–ú (–ü–û–î–†–û–ë–ù–û)

1Ô∏è‚É£ –ü–û–î–ì–û–¢–û–í–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø

# –£–±–µ–¥–∏—Å—å —á—Ç–æ —Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
pwd
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ: /–ø—É—Ç—å/–∫/PRMachine-4

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –µ—Å—Ç—å package.json
ls -la package.json

# –ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é Node.js (–Ω—É–∂–Ω–∞ 18+)
node -v




2Ô∏è‚É£ –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ò–°–ò–ú–û–°–¢–ï–ô

# –£—Å—Ç–∞–Ω–æ–≤–∏ –≤—Å–µ –ø–∞–∫–µ—Ç—ã
npm install

# –£—Å—Ç–∞–Ω–æ–≤–∏ postgres.js –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
npm install postgres drizzle-orm

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å—ë —É—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å
ls -la node_modules | wc -l
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 100 –ø–∞–ø–æ–∫




3Ô∏è‚É£ –ù–ê–°–¢–†–û–ô–ö–ê .env

–í–ê–ñ–ù–û: DATABASE_URL –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pooler (aws-0-eu-central-1.pooler.supabase.com:6543), –∞ –ù–ï –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (db.*.supabase.co:5432), –∏–Ω–∞—á–µ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ IPv6!

# –°–æ–∑–¥–∞–π –∏–ª–∏ –æ–±–Ω–æ–≤–∏ .env —Ñ–∞–π–ª
nano .env


–í—Å—Ç–∞–≤—å –¢–û–ß–ù–û —ç—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

# Supabase Configuration
SUPABASE_URL=https://nldzwfopogknvjjhtuns.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZHp3Zm9wb2drbnZqamh0dW5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NjA2MTksImV4cCI6MjA3NzUzNjYxOX0.Mb1CnnUMFTGFIhYM9UcIdFa6yCG2THp9l2nQQTnnvtw

# Database - POOLER CONNECTION (IPv4 only!)
DATABASE_URL=postgresql://postgres:NeuroMag_1_1@aws-0-eu-central-1.pooler.supabase.com:6543/postgres

# Brave Search API (4 –∫–ª—é—á–∞ –¥–ª—è —Ä–æ—Ç–∞—Ü–∏–∏)
BRAVE_API_KEY_1=BSAiH1vhLfsKM_unpLEPqIulBOwnDgt
BRAVE_API_KEY_2=BSA-qCbl-osY1wjC2lW4PsIjx0Qt1IN
BRAVE_API_KEY_3=BSArBFB2NMjeC8WUZ_Mlif9CwSyjw_2
BRAVE_API_KEY_4=BSArBFB2NMjeC8WUZ_Mlif9CwSyjw_2

# OpenRouter API
OPENROUTER_API_KEY=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

# Session
SESSION_SECRET=auto-generated-secret-change-in-production


–°–æ—Ö—Ä–∞–Ω–∏: Ctrl+O, Enter, Ctrl+X



4Ô∏è‚É£ –ë–ê–ó–ê –î–ê–ù–ù–´–•

# –ü—Ä–∏–º–µ–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase)
npm run db:push

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "ENETUNREACH" –∏–ª–∏ "SSL" - –∏–≥–Ω–æ—Ä–∏—Ä—É–π, 
# —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º API –∑–∞–ø—Ä–æ—Å–µ




5Ô∏è‚É£ –ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê

# –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x start-with-env.sh

# –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –≤ —Ñ–æ–Ω–µ
./start-with-env.sh > server.log 2>&1 &

# –°–æ—Ö—Ä–∞–Ω–∏ PID
echo $! > server.pid

# –ü–æ–¥–æ–∂–¥–∏ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
tail -20 server.log

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# "serving on port 5000"

# –¢–µ—Å—Ç API
curl http://localhost:5000/api/metrics
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ë–î - –Ω–æ—Ä–º, –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç




6Ô∏è‚É£ CLOUDFLARED TUNNEL

# –°–∫–∞—á–∞–π cloudflared
wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -O cloudflared

# –°–¥–µ–ª–∞–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x cloudflared

# –ó–∞–ø—É—Å—Ç–∏ —Ç—É–Ω–Ω–µ–ª—å (–ù–ï –í –§–û–ù–ï!)
./cloudflared tunnel --url http://localhost:5000


–í–ê–ñ–ù–û: –ù–ï –∑–∞–∫—Ä—ã–≤–∞–π —Ç–µ—Ä–º–∏–Ω–∞–ª! –¢—É–Ω–Ω–µ–ª—å –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ.

–£–≤–∏–¥–∏—à—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–µ:

2025-11-02T07:00:00Z INF +--------------------------------------------------------------------------------------------+
2025-11-02T07:00:00Z INF |  Your quick Tunnel has been created! Visit it at (it may take some time to be reachable):  |
2025-11-02T07:00:00Z INF |  https://random-words-name.trycloudflare.com                                               |
2025-11-02T07:00:00Z INF +--------------------------------------------------------------------------------------------+


–ö–û–ü–ò–†–£–ô –°–°–´–õ–ö–£ –ò –û–¢–ö–†–´–í–ê–ô –í –ë–†–ê–£–ó–ï–†–ï!



‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

# 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Frontend)
curl https://–¢–í–û–Ø-–°–°–´–õ–ö–ê.trycloudflare.com/

# 2. API –º–µ—Ç—Ä–∏–∫–∏
curl https://–¢–í–û–Ø-–°–°–´–õ–ö–ê.trycloudflare.com/api/metrics

# 3. –ê—Ä—Å–µ–Ω–∞–ª
curl https://–¢–í–û–Ø-–°–°–´–õ–ö–ê.trycloudflare.com/api/arsenal




üêõ –¢–ò–ü–ò–ß–ù–´–ï –û–®–ò–ë–ö–ò –ò –†–ï–®–ï–ù–ò–Ø

‚ùå "DATABASE_URL is required"

–ü—Ä–∏—á–∏–Ω–∞: .env –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

–†–µ—à–µ–Ω–∏–µ:

# –ò—Å–ø–æ–ª—å–∑—É–π start-with-env.sh –≤–º–µ—Å—Ç–æ npm run dev
./start-with-env.sh


‚ùå "ENETUNREACH 2a05:..." (IPv6 error)

–ü—Ä–∏—á–∏–Ω–∞: –ü—ã—Ç–∞–µ—à—å—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ db.*.supabase.co:5432 (IPv6)

–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π pooler –≤ DATABASE_URL:

# –ü–†–ê–í–ò–õ–¨–ù–û (pooler, port 6543):
DATABASE_URL=postgresql://postgres:NeuroMag_1_1@aws-0-eu-central-1.pooler.supabase.com:6543/postgres

# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, port 5432):
DATABASE_URL=postgresql://postgres:NeuroMag_1_1@db.nldzwfopogknvjjhtuns.supabase.co:5432/postgres


‚ùå "Tenant or user not found"

–ü—Ä–∏—á–∏–Ω–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç username

–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π postgres (–ë–ï–ó project ID):

# –ü–†–ê–í–ò–õ–¨–ù–û:
postgresql://postgres:NeuroMag_1_1@...

# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
postgresql://postgres.nldzwfopogknvjjhtuns:NeuroMag_1_1@...


‚ùå "502 Bad Gateway" –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ü—Ä–∏—á–∏–Ω–∞: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è

–†–µ—à–µ–Ω–∏–µ:

# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
tail -50 server.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
pkill -f "tsx server"
./start-with-env.sh > server.log 2>&1 &


‚ùå Cloudflared –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

–†–µ—à–µ–Ω–∏–µ:

# –ü–æ–ø—Ä–æ–±—É–π —Å curl
curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o cloudflared
chmod +x cloudflared




üîÑ –û–°–¢–ê–ù–û–í–ö–ê –ò –ü–ï–†–ï–ó–ê–ü–£–°–ö

# –û—Å—Ç–∞–Ω–æ–≤–∏ –≤—Å—ë
pkill -f "tsx server"
pkill -f cloudflared

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
./start-with-env.sh > server.log 2>&1 &

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ç—É–Ω–Ω–µ–ª—å
./cloudflared tunnel --url http://localhost:5000




üì¶ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –°–ö–†–ò–ü–¢

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª deploy.sh:

#!/bin/bash
set -e

echo "üöÄ –î–µ–ø–ª–æ–π Vladyka Protocol –Ω–∞ trycloudflare.com"
echo "================================================"

# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
npm install

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ .env
if [ ! -f .env ]; then
  echo "‚ùå .env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω! –°–æ–∑–¥–∞–π –µ–≥–æ —Å–Ω–∞—á–∞–ª–∞."
  exit 1
fi

# 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."
pkill -f "tsx server" || true
pkill -f cloudflared || true
sleep 2

# 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
echo "üîß –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞..."
chmod +x start-with-env.sh
./start-with-env.sh > server.log 2>&1 &
SERVER_PID=$!
echo "Server PID: $SERVER_PID"
sleep 8

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞..."
if curl -s http://localhost:5000/ > /dev/null; then
  echo "‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç!"
else
  echo "‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å server.log"
  exit 1
fi

# 6. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ cloudflared (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
if [ ! -f cloudflared ]; then
  echo "üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ cloudflared..."
  wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -O cloudflared
  chmod +x cloudflared
fi

# 7. –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è
echo "üåê –ó–∞–ø—É—Å–∫ Cloudflare Tunnel..."
echo "‚ö†Ô∏è  –ù–ï –ó–ê–ö–†–´–í–ê–ô –≠–¢–û –û–ö–ù–û!"
echo "================================================"
./cloudflared tunnel --url http://localhost:5000


–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

chmod +x deploy.sh
./deploy.sh




üéØ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ö–û–ü–ò–ü–ê–°–¢–ê (–í–°–Å –°–†–ê–ó–£)

cd PRMachine-4 && \
npm install && \
cat > .env << 'EOF'
SUPABASE_URL=https://nldzwfopogknvjjhtuns.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5sZHp3Zm9wb2drbnZqamh0dW5zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NjA2MTksImV4cCI6MjA3NzUzNjYxOX0.Mb1CnnUMFTGFIhYM9UcIdFa6yCG2THp9l2nQQTnnvtw
DATABASE_URL=postgresql://postgres:NeuroMag_1_1@aws-0-eu-central-1.pooler.supabase.com:6543/postgres
BRAVE_API_KEY_1=BSAiH1vhLfsKM_unpLEPqIulBOwnDgt
BRAVE_API_KEY_2=BSA-qCbl-osY1wjC2lW4PsIjx0Qt1IN
BRAVE_API_KEY_3=BSArBFB2NMjeC8WUZ_Mlif9CwSyjw_2
BRAVE_API_KEY_4=BSArBFB2NMjeC8WUZ_Mlif9CwSyjw_2
OPENROUTER_API_KEY=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
SESSION_SECRET=auto-generated-secret-change-in-production
EOF
chmod +x start-with-env.sh && \
./start-with-env.sh > server.log 2>&1 & sleep 8 && \
wget -q https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -O cloudflared && \
chmod +x cloudflared && \
echo "‚úÖ –í–°–Å –ì–û–¢–û–í–û! –ó–ê–ü–£–°–ö–ê–Æ –¢–£–ù–ù–ï–õ–¨..." && \
./cloudflared tunnel --url http://localhost:5000


–ö–û–ü–ò–†–£–ô –°–°–´–õ–ö–£ https://....trycloudflare.com –ò –û–¢–ö–†–´–í–ê–ô –í –ë–†–ê–£–ó–ï–†–ï!



üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:





–ü—Ä–æ–≤–µ—Ä—å server.log: tail -50 server.log



–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç: curl http://localhost:5000/



–ü—Ä–æ–≤–µ—Ä—å .env: cat .env | grep DATABASE_URL

–í–ê–ñ–ù–û: DATABASE_URL –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:





aws-0-eu-central-1.pooler.supabase.com:6543 (pooler)



postgres:NeuroMag_1_1 (username –ë–ï–ó project ID)



‚úÖ –ì–û–¢–û–í–û! –°–õ–ï–î–£–ô –ò–ù–°–¢–†–£–ö–¶–ò–ò –ò –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨ 100%! üöÄ